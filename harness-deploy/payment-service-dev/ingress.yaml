apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
 {{- if lower .Values.sename}}
 name: ingress-router-{{ lower .Values.sename }}
 {{- else }}
 name: ingress-router
 {{- end }}
 annotations:
   kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/snippets-enabled: "true"
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
spec:
  rules:
  {{- if lower .Values.sename}}
  - host: {{ lower .Values.sename }}.citibanamex.harness-demo.site
  {{- else }}
  - host: citibanamex.harness-demo.site
  {{- end }}
    http:
     paths:
     - pathType: Prefix
       backend:
       {{- if lower .Values.sename}}
          service:
             name: payment-service-{{lower .Values.sename }}-svc
             port:
               number: 8080
       {{- else }}
          service:
             name: payment-service-svc
             port:
               number: 8080
       {{- end }}
